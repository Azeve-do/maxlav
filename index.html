<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apura√ß√£o de pesos</title>
    <link rel="stylesheet" href="stylemaxlav.css">
    <link rel="stylesheet" href="style.css" media=" ">
</head>

<body>
    <header>
        <h1>Indique o peso apurado na semana.</h1>
    </header>
    <main>
        <fieldset>
            <h1 id="obrigado">Inserir todas as informa√ß√µes</h1>
            <form autocomplete="off">
                <div class="alinhando">
                    <label for="inome" class="t√≠tulo">NOME: </label>
                    <input type="text" name="nome" id="inome" class="Infos" placeholder=" Ex: Caio Paz Nunes..."
                        required>
                </div>
                <div class="alinhando">
                    <label for="iubs" class="t√≠tulo">UNIDADE: </label>
                    <input type="text" name="ubs" id="iubs" list="lstubs" class="Infos"
                        placeholder=" Digite o nome da UBS ou, selecione ao clicar...">
                    <datalist id="lstubs">
                    </datalist>
                </div>
                <div class="alinhando">
                    <label for="ipeso" class="t√≠tulo">PESO MEDIDO: </label>
                    <input type="text" name="peso" id="ipeso" class="Infos" placeholder=" Apenas n√∫meros... Limite de 30Kg" min="0"
                        max="25" required>
                </div>
                <div class="alinhando">
                    <label for="isemana" class="t√≠tulo">SEMANA DE REFER√äNCIA:<br><span>( Clique no √≠cone do calend√°rio
                            üëá)</span> </label>
                    <input type="week" class="Infos" required name="semana" id="isemana">
                </div>
                <div>
                    <input type="submit" class="bot√µes" value="ENVIAR" id="loading">
                    <input type="reset" value="LIMPAR" class="bot√µes" id="ilimpar">
                </div>
            </form>
        </fieldset>
    </main>
    <footer>
        <p>feito por</p>
    </footer>

    <script>

        let input = document.querySelector("#ipeso");

        function isNumber(string) {
            return !isNaN(parseFloat(string)) && isFinite(string);
        }

        const checkNumber = (e) => {
            if ((!isNumber(e.target.value) && !e.target.value.includes(',')) || e.target.value.includes('.')) {
                input.value = ""
            } else if (parseFloat(e.target.value) >= 30) {
                input.value = "30"
            }
        }

        input.addEventListener("input", checkNumber);



        /*  const addLoading = () => {
             const bot√£o = document.querySelector('#loading');
             bot√£o.innerHTML = '<img src="/loading.png" id="loading">';
         } */

        const ubsList = [
            "UBS Anunciata de L√∫cia",
            "UBS Carmeno Naghy",
            "UBS Carolina Maria de Jesus",
            "UBS Darcy Alves Evangelista Robalinho",
            "UBS Dr. Adauto Ribeiro",
            "UBS Em√≠lia Cosme Cerqueira",
            "UBS Francisco Dias da Silva",
            "UBS Francisca Lima de Lira",
            "UBS Getulino Jos√© Dias",
            "UBS Guilhermina N√≥brega de Abreu",
            "UBS Helena Marrey",
            "UBS Irm√£ √Ågueda Maria Jaime",
            "UBS Jos√© Francisco Rezende",
            "UBS Jos√© Groff",
            "UBS Jos√© Guimar√£es de Abreu",
            "UBS Jos√© Hil√°rio dos Santos",
            "UBS Jos√© Meneses Alves",
            "UBS Jos√© Sabino Ferreira",
            "UBS Laurinda Rodolfo Rubo",
            "UBS Lia Buarque de Macedo Gasparine",
            "UBS Luciano Rodrigues Costa",
            "UBS Marcio Valdevino",
            "UBS Maria do Socorro Bezerra Patr√≠cio",
            "UBS Maria Gatti Giglio",
            "UBS Maria Girade Cury",
            "UBS Maria Pia de Oliveira",
            "UBS Neyde Alves da Silva",
            "UBS Oduvaldo M√°glio",
            "UBS Octac√≠lio Firmino Lopes",
            "UBS Padre Guerrino Riciotti",
            "UBS Raimunda Cavalcante de Souza",
            "UBS Santa Gema Galgani",
            "UBS Santa Maria Goretti",
            "UBS Silvio Jo√£o Luis de L√∫cia",
            "UBS Vasco da Rocha Le√£o",
            "Casa do Adolescente",
            "Centro de Especialidades Odontol√≥gicas",
            "Centro de Aten√ß√£o ao Idoso - √önico Gallafrio",
            "Centro de Aten√ß√£o ao Idoso - Padre Rafael Busatto"
        ]

        const ubsTextList = [
            "Anunciata",
            "Jardim D'Avila",
            "Jaguaribe",
            "Ayrosa I",
            "Tr√™s Montanhas",
            "Munhoz II",
            "Quita√∫na",
            "Portal",
            "Jardim Padroeira",
            "Metal√∫rgicos",
            "Rochdalle",
            "Olaria",
            "Vila Yolanda",
            "Jardim Alian√ßa",
            "Cipava",
            "Piratininga",
            "Santa Maria",
            "Baronesa",
            "Jardim D'Abril",
            "Vila Justi√ßa",
            "Jardim Roberto",
            "Vila Menck",
            "Palmares",
            "Jardim das Flores",
            "Novo Osasco",
            "Santo Ant√¥nio",
            "Cidade das Flores",
            "Vila Yara",
            "Ayrosa II",
            "Vila dos Rem√©dios",
            "Munhoz I",
            "Santa Gema",
            "Bela Vista",
            "Helena Maria",
            "Jardim Veloso",
            "CdA",
            "CEO",
            "CAI - KM18",
            "CAI - Altino",
        ]

        let dataList = document.querySelector('#lstubs')

        for (let i = 0; i < ubsList.length; i++) {
            let option = document.createElement('option')
            option.value = ubsList[i]
            option.textContent = ubsTextList[i]
            dataList.appendChild(option)
        }

        const handleSubmit = (event) => {
            event.preventDefault();
            /* addLoading(); */

            const nome = document.querySelector('input[name=nome]').value;
            const ubs = document.querySelector('input[name=ubs]').value;
            const peso = document.querySelector('input[name=peso]').value;
            const semana = document.querySelector('input[name=semana]').value;

            fetch('https://api.sheetmonkey.io/form/i3pppLSPiFjp7vARJFx5uc', {
                method: 'post',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ nome, ubs, peso, semana }),
            });
        }

        document.querySelector('form').addEventListener('submit', handleSubmit)
    </script>
</body>

</html>